<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/checkout.css">
  <link rel="icon" href="/images/favi.png" type="image/x-icon">
  <title>Checkout Cart</title>
</head>

<body onload="downloadinvoice()">
  <!--------------------------------------------------BASE HOMEPAGE HTML ENDS-------------------------------------------------------------->
  <div id="logo" class="header">
    <a href="/home">
      <img src="/images/bgnew.jpg" alt="">
    </a>
  </div>
  <div class="sidebar">
    <div class="logo-details">
      <i class='bx bx-menu' id="btn"></i>
    </div>
    <ul class="nav-list">
      <li>
        <a href="/shop">
          <i class='bx bx-plus-medical bx-flip-horizontal'></i>
          <span class="links_name"> Medicines & Equipments</span>
        </a>
        <span class="tooltip">Medicines and Equipments</span>
      </li>
      <li>
        <a href="/test">
          <i class='bx bx-test-tube bx-flip-horizontal'></i>
          <span class="links_name">Lab tests</span>
        </a>
        <span class="tooltip">Lab tests</span>
      </li>
      <li>
        <a href="/calculators">
          <i class='bx bx-pie-chart-alt-2'></i>
          <span class="links_name">Calculators</span>
        </a>
        <span class="tooltip">Calculators</span>
      </li>
      <li>
        <a href="/checkout">
          <i class='bx bx-cart-alt'></i>
          <span class="links_name ">Checkout Cart</span>
          <span class="links_name cart1 "></span>
        </a>
        <span class="tooltip ">Checkout Cart</span>



      </li>
      <li>
        <a href="/profile">
          <i class='bx bx-user'></i>
          <span class="links_name">Profile</span>
        </a>
        <span class="tooltip">Profile</span>
      </li>
      <li class="profile">
        <div class="profile-details">
          <div class="name_job">
            <div class="name">CURE VIBE BEAU â’¸ 2021</div>
            <div class="job">Pharmacy and Pathology Labs</div>
          </div>
        </div>
        <i class='bx bx-log-out' id="log_out" onclick="handlelogout()"></i>
      </li>
    </ul>
  </div>

  <script>
    let sidebar = document.querySelector(".sidebar");
    let closeBtn = document.querySelector("#btn");
    let searchBtn = document.querySelector(".bx-search");

    closeBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      menuBtnChange(); //calling the function(optional)
    });

    searchBtn.addEventListener("click", () => { // Sidebar open when you click on the search iocn
      sidebar.classList.toggle("open");
      menuBtnChange(); //calling the function(optional)
    });

    // following are the code to change sidebar button(optional)
    function menuBtnChange() {
      if (sidebar.classList.contains("open")) {
        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right"); //replacing the iocns class

      } else {
        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu"); //replacing the iocns class
      }
    }
  </script>
  <section class="home-section">
    <!-- <div class="checkoutcontainer"> -->
    <!-- <div class="container mt-4 row">
    <h5 class="product-title col-lg">Product</h5>
    <h5 class="product-title  col-lg">Price</h5>
    <h5 class="product-title  col-lg">Quantity</h5>
    <h5 class="product-title  col-lg">Total</h5>
 
</div> -->
    <h3
      style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; margin-top: 2em; margin-left:2em; color: teal;">
      Checkout Your Cart</h3>
    <div class="outer_box">
      <div class="row">
        <div class="column product-title">
          <h3 class="product-title col-lg"
            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: teal;">
            Product</h3>
        </div>
        <div class="column product-title">
          <h3 class="product-title col-lg"
            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: teal;">
            Price</h3>
        </div>
        <div class="column product-title">
          <h3 class="product-title col-lg"
            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: teal;">
            Quantity</h3>
        </div>
        <div class="column product-title">
          <h3 class="product-title col-lg"
            style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: teal;">
            Total</h3>
        </div>
      </div>
    </div>

    <!----- for refrence you can check 'main.js' displaycart() function  line 205 -->
    <div class="product">
      <!--  "item" class-->
      <!--  "quantity" class-->
      <!--  "price" class-->
      <!--  "total" class-->
    </div>

    <div class="outer-grand">
      <div class="grandtotal">
        <!-- "grandtotal" class-->
      </div>
    </div>

    </div>
    <a class="btn btn-primary invoiiice" href="/downloadinvoice">Download invoice</a>

  </section>
  <script src='/js/main.js'></script>







  <!---------------------------------------------------------------FIREBASE---------------------------------------------->
  <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js">
  </script>
  <script>
    const config = {
      apiKey: "AIzaSyDW5-Szhn5ruui9xPVGqDGQ5ObQ2VYma8k",
      authDomain: "cure-vibe-beau.firebaseapp.com",
      databaseURL: "https://cure-vibe-beau-default-rtdb.firebaseio.com",
      projectId: "cure-vibe-beau",
      storageBucket: "cure-vibe-beau.appspot.com",
      messagingSenderId: "262834749571",
      appId: "1:262834749571:web:09da42fa5c78eee9b0dbb6",
      measurementId: "G-SXR0ZGKPD7"
    };
    firebase.initializeApp(config);
    const auth = firebase.auth();

    function handlelogout() {
      firebase.auth().signOut();
      localStorage.clear();
      window.location = ('/')
    }

    function downloadinvoice() {
      let counts = localStorage.getItem("count");
      if (counts === null)
        localStorage.setItem("count", 1);
      else {
        counts = parseInt(counts);
        if (counts >= 10)
          localStorage.clear();
        else
          localStorage.setItem("count", counts + 1);
      }
      let cartitems = localStorage.getItem("productsincart");
      cartitems = JSON.parse(cartitems);
      //console.log(cartitems);
           
      var name=localStorage.getItem('user-name');
       var email=localStorage.getItem('user-email');
      if(name==null||email==null)
      {
        name="Rohit sharma";
        email="rohitsharma@gmail.com"

      }
      const info={
        name:name,
        email:email
      }
      const inforef=firebase.database().ref('tempuser');
      inforef.set(info);
      const data = [];

      Object.values(cartitems).map(item => {
        data.push({
          Name: item.Name,
          Price: item.Price,
          Incart: item.inCart,
          Total: item.inCart * item.Price
        })
        //console.log(data);
      })
      const tempgref = firebase.database().ref('temp');
      tempgref.set(data);

      //localStorage.clear();
      //console.log(data.length);


    }
  </script>

</body>

</html>